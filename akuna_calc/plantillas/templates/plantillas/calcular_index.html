{% extends 'plantillas/base_plantillas.html' %}

{% block plantillas_content %}
<div class="text-center mb-8">
    <h1 class="text-4xl font-bold text-gray-800 mb-2">Calculadora de Despiece</h1>
    <p class="text-gray-600">Selecciona una plantilla para calcular</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for plantilla in plantillas %}
    <a href="{% url 'plantillas:calcular_ejecutar' plantilla.pk %}" class="block bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6">
        <div class="flex items-start justify-between mb-4">
            <div class="bg-blue-100 rounded-lg p-3">
                <i class="fas fa-calculator text-blue-600 text-2xl"></i>
            </div>
            <span class="text-sm text-gray-500">{{ plantilla.campos.count }} campos</span>
        </div>
        
        <h3 class="text-xl font-bold text-gray-800 mb-2">{{ plantilla.nombre }}</h3>
        
        {% if plantilla.descripcion %}
        <p class="text-gray-600 text-sm">{{ plantilla.descripcion|truncatewords:15 }}</p>
        {% endif %}
        
        <div class="mt-4 pt-4 border-t flex justify-between items-center">
            <span class="text-sm text-gray-500">
                <i class="fas fa-keyboard mr-1"></i>
                {{ plantilla.campos.filter|length }} inputs
            </span>
            <span class="text-blue-600 font-semibold">
                Calcular <i class="fas fa-arrow-right ml-1"></i>
            </span>
        </div>
    </a>
    {% empty %}
    <div class="col-span-full text-center py-12">
        <i class="fas fa-inbox text-gray-300 text-6xl mb-4"></i>
        <p class="text-gray-500 text-lg">No hay plantillas activas disponibles</p>
        {% if user.is_staff %}
        <a href="{% url 'plantillas:plantilla_list' %}" class="mt-4 inline-block text-blue-600 hover:underline">
            Ir a configuraci√≥n de plantillas
        </a>
        {% endif %}
    </div>
    {% endfor %}
</div>

{% if user.is_staff %}
<div class="mt-8 text-center">
    <a href="{% url 'plantillas:plantilla_list' %}" class="text-blue-600 hover:underline">
        <i class="fas fa-cog mr-2"></i>Administrar plantillas
    </a>
</div>
{% endif %}
{% endblock %}
